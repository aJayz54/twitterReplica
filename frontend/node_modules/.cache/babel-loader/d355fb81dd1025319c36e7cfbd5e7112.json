{"ast":null,"code":"var _jsxFileName = \"/Users/andrew/twitter/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport axios from \"axios\";\nimport img from './profile.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refreshList = () => {\n      axios.get(\"/api/tweets/\").then(res => this.setState({\n        tweets: res.data\n      })).catch(err => console.log(err));\n      axios.get(\"/api/users/\").then(res => this.setState({\n        users: res.data\n      })).catch(err => console.log(err));\n\n      for (let i = 0; i < Object.keys(this.state.users).length; i++) {\n        if (this.state.users[i].email === this.state.currentEmail) {\n          this.setState({\n            currentUser: this.state.users[i].id\n          });\n        }\n\n        ;\n      }\n    };\n\n    this.renderTweets = () => {\n      const tweetList = this.state.tweets;\n      return tweetList.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tweets\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile-pic-post\",\n            src: img,\n            alt: \"profilepic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [this.state.users[item.user - 1].username, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 11\n          }, this), item.post_text, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 11\n          }, this), item.likes.includes(this.state.currentUser) && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              children: [item.likes.length, \" Likes \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger\",\n              onClick: () => this.handleUnlike(item),\n              children: \"Unlike\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), !item.likes.includes(this.state.currentUser) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => this.handleLike(item),\n            children: [item.likes.length, \" Likes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 9\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }, this));\n    };\n\n    this.state = {\n      tweets: [],\n      users: [],\n      newText: '',\n      isLoggedIn: false,\n      registerEmail: '',\n      registerPassword1: '',\n      registerPassword2: '',\n      registerUsername: '',\n      loginEmail: '',\n      loginPassword: '',\n      loginError: false,\n      registerError: false,\n      currentEmail: '',\n      currentUser: null,\n      registerUser: false\n    };\n    this.refreshList();\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleRegEmail = this.handleRegEmail.bind(this);\n    this.handleRegPassword1 = this.handleRegPassword1.bind(this);\n    this.handleRegPassword2 = this.handleRegPassword2.bind(this);\n    this.handleRegUsername = this.handleRegUsername.bind(this);\n    this.register = this.register.bind(this);\n    this.handleLoginEmail = this.handleLoginEmail.bind(this);\n    this.handleLoginPassword = this.handleLoginPassword.bind(this);\n    this.login = this.login.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLike = this.handleLike.bind(this);\n    this.handleUnlike = this.handleUnlike.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  handleTextChange(event) {\n    this.setState({\n      newText: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    var currentDate = new Date();\n    var user = null;\n    var date = currentDate.getFullYear() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getDate() + 'T' + currentDate.getHours() + \":\" + currentDate.getMinutes() + \":00Z\";\n\n    for (let i = 0; i < Object.keys(this.state.users).length; i++) {\n      if (this.state.users[i].email === this.state.currentEmail) {\n        this.setState({\n          currentUser: this.state.users[i].id\n        });\n        user = this.state.users[i].id;\n      }\n\n      ;\n    }\n\n    const item = {\n      user: user,\n      post_text: this.state.newText,\n      likes: [],\n      image: null,\n      pub_date: date\n    };\n    console.log(item);\n    axios.post(\"/api/tweets/\", item).then(res => this.refreshList());\n  }\n\n  handleLike(item) {\n    var tempLikes = item.likes.slice();\n    const id = item.id;\n    tempLikes.push(this.state.currentUser);\n    const newTweet = {\n      id: item.id,\n      user: item.user,\n      post_text: item.post_text,\n      likes: tempLikes,\n      image: item.image,\n      pub_date: item.pub_date.substring(6, 10) + '-' + item.pub_date.substring(0, 2) + '-' + item.pub_date.substring(3, 5) + 'T' + item.pub_date.substring(11, 16) + \":00Z\"\n    };\n    console.log(newTweet);\n    axios.put(\"/api/tweets/\" + id + \"/\", newTweet).then(res => this.refreshList()).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  handleUnlike(item) {\n    var tempLikes = item.likes.slice();\n    const id = item.id;\n    tempLikes.splice(item.likes.indexOf(this.state.currentUser), 1);\n    const newTweet = {\n      id: item.id,\n      user: item.user,\n      post_text: item.post_text,\n      likes: tempLikes,\n      image: item.image,\n      pub_date: item.pub_date.substring(6, 10) + '-' + item.pub_date.substring(0, 2) + '-' + item.pub_date.substring(3, 5) + 'T' + item.pub_date.substring(11, 16) + \":00Z\"\n    };\n    console.log(newTweet);\n    axios.put(\"/api/tweets/\" + id + \"/\", newTweet).then(res => this.refreshList()).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  handleRegEmail(event) {\n    this.setState({\n      registerEmail: event.target.value\n    });\n  }\n\n  handleRegPassword1(event) {\n    this.setState({\n      registerPassword1: event.target.value\n    });\n  }\n\n  handleRegPassword2(event) {\n    this.setState({\n      registerPassword2: event.target.value\n    });\n  }\n\n  handleRegUsername(event) {\n    this.setState({\n      registerUsername: event.target.value\n    });\n  }\n\n  handleChange(event) {\n    this.setState(prevstate => ({\n      registerUser: !prevstate.registerUser\n    }));\n  }\n\n  register(event) {\n    event.preventDefault();\n    const user = {\n      email: this.state.registerEmail,\n      username: this.state.registerUsername,\n      password1: this.state.registerPassword1,\n      password2: this.state.registerPassword2\n    };\n    fetch('http://127.0.0.1:8000/api/v1/users/auth/register/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      if (data.key) {\n        localStorage.clear();\n        localStorage.setItem('token', data.key);\n        this.setState({\n          currentEmail: user.email\n        });\n        this.setState({\n          isLoggedIn: true\n        });\n        this.refreshList();\n      } else {\n        this.setState({\n          registerEmail: ''\n        });\n        this.setState({\n          registerPassword1: ''\n        });\n        this.setState({\n          registerPassword2: ''\n        });\n        this.setState({\n          registerUsername: ''\n        });\n        this.setState({\n          registerError: 'true'\n        });\n        localStorage.clear();\n      }\n    });\n  }\n\n  handleLoginEmail(event) {\n    this.setState({\n      loginEmail: event.target.value\n    });\n  }\n\n  handleLoginPassword(event) {\n    this.setState({\n      loginPassword: event.target.value\n    });\n  }\n\n  login(event) {\n    event.preventDefault();\n    const user = {\n      email: this.state.loginEmail,\n      password: this.state.loginPassword\n    };\n    fetch('http://127.0.0.1:8000/api/v1/users/auth/login/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      if (data.key) {\n        localStorage.clear();\n        localStorage.setItem('token', data.key);\n        this.setState({\n          currentEmail: user.email\n        });\n        this.setState({\n          isLoggedIn: true\n        });\n        this.refreshList();\n      } else {\n        this.setState({\n          loginEmail: ''\n        });\n        this.setState({\n          loginPassword: ''\n        });\n        this.setState({\n          loginError: true\n        });\n        localStorage.clear();\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.isLoggedIn && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center bg-info my-4\",\n          children: \"Twitter Replica\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"input-group mb-3 col-md-6 col-sm-10 mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control form-control-lg flex-nowrap mx-auto\",\n            placeholder: \"enter tweet here\",\n            value: this.state.newText,\n            onChange: this.handleTextChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group-append\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-secondary\",\n              type: \"button\",\n              id: \"button-addon2\",\n              onClick: this.handleSubmit,\n              children: \"Tweet!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-sm-10 mx-auto p-0 text-wrap\",\n            children: this.renderTweets()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 7\n      }, this), !this.state.isLoggedIn && !this.state.registerUser && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center bg-info my-4\",\n          children: \"Twitter Replica\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wrapper fadeInDown\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"formContent\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Sign in \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 15\n              }, this), this.state.loginError === true && /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-danger\",\n                children: \" Cannot Login With the Provided Credentials\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 50\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"email\",\n                className: \"fadeIn second\",\n                name: \"email\",\n                placeholder: \"email\",\n                value: this.state.loginEmail,\n                onChange: this.handleLoginEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password\",\n                className: \"fadeIn third\",\n                name: \"password\",\n                placeholder: \"password\",\n                value: this.state.loginPassword,\n                onChange: this.handleLoginPassword\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"submit\",\n                className: \"fadeIn fourth\",\n                value: \"Sign In\",\n                onClick: this.login\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"formFooter\",\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"underlineHover\",\n                onClick: this.handleChange,\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 7\n      }, this), !this.state.isLoggedIn && this.state.registerUser && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center my-4\",\n          children: \"Twitter Replica\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wrapper fadeInDown\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"formContent\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Register \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 15\n              }, this), this.state.registerError && /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-danger\",\n                children: \"Username or Email already taken!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 44\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"regemail\",\n                className: \"fadeIn second\",\n                name: \"email\",\n                placeholder: \"email\",\n                value: this.state.registerEmail,\n                onChange: this.handleRegEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"username\",\n                id: \"regusername\",\n                className: \"fadeIn third\",\n                name: \"username\",\n                placeholder: \"username\",\n                value: this.state.registerUsername,\n                onChange: this.handleRegUsername\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password1\",\n                className: \"fadeIn fourth\",\n                name: \"password1\",\n                placeholder: \"password\",\n                value: this.state.registerPassword1,\n                onChange: this.handleRegPassword1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password2\",\n                className: \"fadeIn fourth\",\n                name: \"password2\",\n                placeholder: \"enter password again!\",\n                value: this.state.registerPassword2,\n                onChange: this.handleRegPassword2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"submit\",\n                className: \"fadeIn fifth\",\n                value: \"Register!\",\n                onClick: this.register\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"formFooter\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"underlineHover\",\n                onClick: this.handleChange,\n                children: \"Already Have An Account?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/andrew/twitter/frontend/src/App.js"],"names":["React","Component","axios","img","App","constructor","props","refreshList","get","then","res","setState","tweets","data","catch","err","console","log","users","i","Object","keys","state","length","email","currentEmail","currentUser","id","renderTweets","tweetList","map","item","user","username","post_text","likes","includes","handleUnlike","handleLike","newText","isLoggedIn","registerEmail","registerPassword1","registerPassword2","registerUsername","loginEmail","loginPassword","loginError","registerError","registerUser","handleTextChange","bind","handleSubmit","handleRegEmail","handleRegPassword1","handleRegPassword2","handleRegUsername","register","handleLoginEmail","handleLoginPassword","login","handleChange","componentDidMount","event","target","value","currentDate","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","image","pub_date","post","tempLikes","slice","push","newTweet","substring","put","error","response","splice","indexOf","prevstate","preventDefault","password1","password2","fetch","method","headers","body","JSON","stringify","json","key","localStorage","clear","setItem","password","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from \"axios\";\nimport img from './profile.png';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tweets: [],\n      users: [],\n      newText: '',\n      isLoggedIn: false,\n      registerEmail: '',\n      registerPassword1: '',\n      registerPassword2: '',\n      registerUsername: '',\n      loginEmail: '',\n      loginPassword: '',\n      loginError: false,\n      registerError: false,\n      currentEmail: '',\n      currentUser:null,\n      registerUser: false,\n    };\n    this.refreshList();\n\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleRegEmail = this.handleRegEmail.bind(this);\n    this.handleRegPassword1=this.handleRegPassword1.bind(this);\n    this.handleRegPassword2 = this.handleRegPassword2.bind(this);\n    this.handleRegUsername=this.handleRegUsername.bind(this);\n    this.register = this.register.bind(this);\n    this.handleLoginEmail = this.handleLoginEmail.bind(this);\n    this.handleLoginPassword = this.handleLoginPassword.bind(this);\n    this.login = this.login.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLike = this.handleLike.bind(this);\n    this.handleUnlike = this.handleUnlike.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  refreshList = () => {\n    axios\n      .get(\"/api/tweets/\")\n      .then((res) => this.setState({tweets : res.data}))\n      .catch((err) => console.log(err))\n    \n    axios\n      .get(\"/api/users/\")\n      .then((res) => this.setState({users : res.data}))\n      .catch((err) => console.log(err))\n    \n    for (let i = 0; i < Object.keys(this.state.users).length; i++) {\n      if (this.state.users[i].email === this.state.currentEmail) {\n        this.setState({currentUser: this.state.users[i].id});\n      };\n    }\n  }\n\n  handleTextChange(event) {\n    this.setState({newText : event.target.value})\n  }\n\n  handleSubmit(event) {\n    var currentDate = new Date();\n    var user = null;\n    var date = currentDate.getFullYear()+ '-' + (currentDate.getMonth()+1)+ '-' + currentDate.getDate()+'T' + currentDate.getHours()+\":\"+currentDate.getMinutes()+\":00Z\"\n    for (let i = 0; i < Object.keys(this.state.users).length; i++) {\n      if (this.state.users[i].email === this.state.currentEmail) {\n        this.setState({currentUser: this.state.users[i].id});\n        user = this.state.users[i].id;\n      };\n    }\n    \n    const item = {\n      user: user,\n      post_text: this.state.newText,\n      likes: [],\n      image: null,\n      pub_date: date,\n    }\n    console.log(item)\n    axios\n      .post(\"/api/tweets/\", item)\n      .then((res) => this.refreshList());\n  }\n\n  handleLike(item) {\n    var tempLikes = item.likes.slice();\n    const id = item.id;\n    tempLikes.push(this.state.currentUser);\n    const newTweet = {\n      id: item.id,\n      user: item.user,\n      post_text: item.post_text,\n      likes: tempLikes,\n      image: item.image,\n      pub_date: item.pub_date.substring(6, 10)+'-'+item.pub_date.substring(0, 2)+'-'+item.pub_date.substring(3, 5)+'T'+item.pub_date.substring(11, 16)+\":00Z\",\n    };\n    console.log(newTweet);\n    axios\n      .put(\"/api/tweets/\"+ id +\"/\", newTweet)\n      .then((res) => this.refreshList())\n      .catch((error) => {\n        console.log(error.response)\n      });\n  }\n\n  handleUnlike(item) {\n    var tempLikes = item.likes.slice();\n    const id = item.id;\n    tempLikes.splice(item.likes.indexOf(this.state.currentUser), 1);\n    const newTweet = {\n      id: item.id,\n      user: item.user,\n      post_text: item.post_text,\n      likes: tempLikes,\n      image: item.image,\n      pub_date: item.pub_date.substring(6, 10)+'-'+item.pub_date.substring(0, 2)+'-'+item.pub_date.substring(3, 5)+'T'+item.pub_date.substring(11, 16)+\":00Z\",\n    };\n    console.log(newTweet);\n    axios\n      .put(\"/api/tweets/\"+ id +\"/\", newTweet)\n      .then((res) => this.refreshList())\n      .catch((error) => {\n        console.log(error.response)\n      });\n  }\n  handleRegEmail(event) {\n    this.setState({registerEmail : event.target.value})\n  }\n\n  handleRegPassword1(event) {\n    this.setState({registerPassword1: event.target.value})\n  }\n\n  handleRegPassword2(event) {\n    this.setState({registerPassword2: event.target.value})\n  }\n\n  handleRegUsername(event) {\n    this.setState({registerUsername: event.target.value})\n  }\n\n  handleChange(event) {\n    this.setState(prevstate =>\n      ({registerUser : !prevstate.registerUser})\n    )\n  }\n\n  register(event) {\n    event.preventDefault();\n\n    const user = {\n      email: this.state.registerEmail,\n      username: this.state.registerUsername,\n      password1: this.state.registerPassword1,\n      password2: this.state.registerPassword2,\n    };\n\n    fetch ('http://127.0.0.1:8000/api/v1/users/auth/register/', {\n      method : 'POST',\n      headers : {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem('token', data.key)\n          this.setState({currentEmail: user.email})\n          this.setState({isLoggedIn : true});\n          this.refreshList();\n        } else {\n          this.setState({registerEmail: ''});\n          this.setState({registerPassword1: ''});\n          this.setState({registerPassword2: ''});\n          this.setState({registerUsername: ''});\n          this.setState({registerError: 'true'});\n          localStorage.clear();\n        }\n        });\n  };\n\n  handleLoginEmail(event) {\n    this.setState({loginEmail : event.target.value})\n  }\n  \n  handleLoginPassword(event) {\n    this.setState({loginPassword: event.target.value})\n  }\n\n  login(event) {\n    event.preventDefault();\n\n    const user = {\n      email: this.state.loginEmail,\n      password: this.state.loginPassword,\n    };\n\n    \n    fetch ('http://127.0.0.1:8000/api/v1/users/auth/login/', {\n      method : 'POST',\n      headers : {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem('token', data.key);\n          this.setState({currentEmail : user.email})\n          this.setState({isLoggedIn : true});\n          this.refreshList();\n        } else {\n          this.setState({loginEmail: ''});\n          this.setState({loginPassword: ''});\n          this.setState({loginError: true});\n          localStorage.clear();\n        }\n        });\n  };\n\n  renderTweets = () => {\n    const tweetList = this.state.tweets;\n    \n    return tweetList.map((item) => (\n      <li key = {item.id}\n      className = \"list-group-item d-flex justify-content-between align-items-center\">\n        <span className=\"tweets\">\n          <img className=\"profile-pic-post\" src={img} alt=\"profilepic\"/>\n          <h2>{this.state.users[item.user - 1].username} </h2>\n          <br/>\n              {item.post_text} \n          <br/>\n          {item.likes.includes(this.state.currentUser) && \n            <div>\n              <button className = \"btn btn-primary\">{item.likes.length} Likes </button>\n              <button className = \"btn btn-danger\" onClick={()=>this.handleUnlike(item)}>Unlike</button>\n            </div>\n          }\n          {!item.likes.includes(this.state.currentUser) &&\n            <button className = \"btn btn-primary\" onClick={()=>this.handleLike(item)}>{item.likes.length} Likes</button>\n          }\n        </span>\n      </li>\n    ));\n  };\n\n\n  render() {\n    return (\n      <div>\n      { this.state.isLoggedIn && \n      <main className=\"bg-white\">\n        <h1 className=\"text-black text-center bg-info my-4\">Twitter Replica</h1>\n        <div class = \"input-group mb-3 col-md-6 col-sm-10 mx-auto\">\n          <input type=\"text\" className = \"form-control form-control-lg flex-nowrap mx-auto\" placeholder = \"enter tweet here\" value = {this.state.newText} onChange = {this.handleTextChange}/>\n          <div className = \"input-group-append\">\n            <button className=\"btn btn-outline-secondary\" type=\"button\" id=\"button-addon2\" onClick={this.handleSubmit}>Tweet!</button>\n          </div>\n        </div>\n        <div className=\"flex-container\">\n          <div className=\"col-md-6 col-sm-10 mx-auto p-0 text-wrap\">\n                {this.renderTweets()}\n          </div>\n        </div>\n      </main>\n      }\n      { !this.state.isLoggedIn && !this.state.registerUser &&\n      <main className>\n        <h1 className=\"text-black text-center bg-info my-4\">Twitter Replica</h1>\n        <div class=\"wrapper fadeInDown\">\n          <div id = \"formContent\">\n            <form>\n              <h2>Sign in </h2>\n              {this.state.loginError === true && <h2 className=\"text-danger\"> Cannot Login With the Provided Credentials</h2>}\n              <br/>\n              <input type = \"text\" id = \"email\" className = \"fadeIn second\" name = \"email\" placeholder = \"email\" value = {this.state.loginEmail} onChange = {this.handleLoginEmail}/>\n              <br/>\n              <input type = \"password\" id = \"password\" className = \"fadeIn third\" name = \"password\" placeholder = \"password\" value = {this.state.loginPassword} onChange = {this.handleLoginPassword}/>\n              <br/>\n              <input type = \"submit\" className = \"fadeIn fourth\" value = \"Sign In\" onClick={this.login}/>\n            </form>\n            <div id=\"formFooter\">\n              <br/>\n              <button className = \"underlineHover\" onClick={this.handleChange}>Register</button>\n            </div>\n          </div>\n        </div>\n      </main>\n      }\n      { !this.state.isLoggedIn && this.state.registerUser &&\n      <main className>\n        <h1 className=\"text-black text-center my-4\">Twitter Replica</h1>\n        <div class=\"wrapper fadeInDown\">\n          <div id = \"formContent\">\n            <form>\n              <h2>Register </h2>\n              <br/>\n              {this.state.registerError && <h2 className = \"text-danger\">Username or Email already taken!</h2>}\n              <br/>\n              <input type = \"text\" id = \"regemail\" className = \"fadeIn second\" name = \"email\" placeholder = \"email\" value = {this.state.registerEmail} onChange = {this.handleRegEmail}/>\n              <br/>\n              <input type = \"username\" id = \"regusername\" className = \"fadeIn third\" name = \"username\" placeholder = \"username\" value = {this.state.registerUsername} onChange = {this.handleRegUsername}/>\n              <br/>\n              <input type = \"password\" id = \"password1\" className = \"fadeIn fourth\" name = \"password1\" placeholder = \"password\" value = {this.state.registerPassword1} onChange = {this.handleRegPassword1}/>\n              <br/>\n              <input type = \"password\" id = \"password2\" className = \"fadeIn fourth\" name = \"password2\" placeholder = \"enter password again!\" value = {this.state.registerPassword2} onChange = {this.handleRegPassword2}/>\n              <br/>\n              <input type = \"submit\" className = \"fadeIn fifth\" value = \"Register!\" onClick={this.register}/>\n            </form>\n            <div id=\"formFooter\">\n              <button type=\"submit\" className = \"underlineHover\" onClick={this.handleChange}>Already Have An Account?</button>\n            </div>\n          </div>\n        </div>\n      </main>\n      }\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}