{"ast":null,"code":"var _jsxFileName = \"/Users/andrew/twitter/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refreshList = () => {\n      axios.get(\"/api/tweets/\").then(res => this.setState({\n        tweets: res.data\n      })).catch(err => console.log(err));\n    };\n\n    this.renderTweets = () => {\n      const tweetList = this.state.tweets;\n      return tweetList.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [item.user, \" : \", item.post_text]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }, this));\n    };\n\n    this.state = {\n      tweets: [],\n      newText: '',\n      isLoggedIn: false,\n      registerEmail: '',\n      registerPassword1: '',\n      registerPassword2: '',\n      registerUsername: '',\n      loginEmail: '',\n      loginPassword: '',\n      loginUsername: ''\n    };\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleRegEmail = this.handleRegEmail.bind(this);\n    this.handleRegPassword1 = this.handleRegPassword1.bind(this);\n    this.handleRegPassword2 = this.handleRegPassword2.bind(this);\n    this.handleRegUsername = this.handleRegUsername.bind(this);\n    this.register = this.register.bind(this);\n    this.handleLoginEmail = this.handleLoginEmail.bind(this);\n    this.handleLoginPassword = this.handleLoginPassword.bind(this);\n    this.handleLoginUsername = this.handleLoginUsername.bind(this);\n    this.login = this.login.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  handleTextChange(event) {\n    this.setState({\n      newText: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    var currentDate = new Date();\n    var date = currentDate.getFullYear() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getDate() + 'T' + currentDate.getHours() + \":\" + currentDate.getMinutes() + \":00Z\";\n    const item = {\n      post_text: this.state.newText,\n      image: null,\n      pub_date: date\n    };\n    axios.post(\"/api/tweets/\", item).then(res => this.refreshList());\n  }\n\n  handleRegEmail(event) {\n    this.setState({\n      registerEmail: event.target.value\n    });\n  }\n\n  handleRegPassword1(event) {\n    this.setState({\n      registerPassword1: event.target.value\n    });\n  }\n\n  handleRegPassword2(event) {\n    this.setState({\n      registerPassword2: event.target.value\n    });\n  }\n\n  handleRegUsername(event) {\n    this.setState({\n      registerUsername: event.target.value\n    });\n  }\n\n  register(event) {\n    event.preventDefault();\n    const user = {\n      email: this.state.registerEmail,\n      username: this.state.registerUsername,\n      password1: this.state.registerPassword1,\n      password2: this.state.registerPassword2\n    };\n    fetch('http://127.0.0.1:8000/api/v1/users/auth/register', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      if (data.key) {\n        localStorage.clear();\n        localStorage.setItem('token', data.key);\n        this.setState({\n          isLoggedIn: true\n        });\n      } else {\n        this.setState({\n          registerEmail: ''\n        });\n        this.setState({\n          registerPassword1: ''\n        });\n        this.setState({\n          registerPassword2: ''\n        });\n        this.setState({\n          registerUsername: ''\n        });\n        localStorage.clear();\n      }\n    });\n  }\n\n  handleLoginEmail(event) {\n    this.setState({\n      loginEmail: event.target.value\n    });\n  }\n\n  handleLoginPassword(event) {\n    this.setState({\n      loginPassword: event.target.value\n    });\n  }\n\n  handleLoginUsername(event) {\n    this.setState({\n      loginUsername: event.target.value\n    });\n  }\n\n  login(event) {\n    event.preventDefault();\n    const user = {\n      email: this.state.loginEmail,\n      username: this.state.loginUsername,\n      password: this.state.loginPassword\n    };\n    fetch('http://127.0.0.1:8000/api/v1/users/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      if (data.key) {\n        localStorage.clear();\n        localStorage.setItem('token', data.key);\n        console.log(data.key);\n        this.setState({\n          isLoggedIn: true\n        });\n      } else {\n        this.setState({\n          loginEmail: ''\n        });\n        this.setState({\n          loginPassword: ''\n        });\n        this.setState({\n          loginUsername: ''\n        });\n        localStorage.clear();\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.isLoggedIn && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center bg-info my-4\",\n          children: \"Twitter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"input-group mb-3 col-md-6 col-sm-10 mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control form-control-lg flex-nowrap mx-auto\",\n            placeholder: \"enter tweet here\",\n            value: this.state.newText,\n            onChange: this.handleTextChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"input-group-append\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-outline-secondary\",\n              type: \"button\",\n              id: \"button-addon2\",\n              onClick: this.handleSubmit,\n              children: \"Tweet!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-sm-10 mx-auto p-0\",\n            children: this.renderTweets()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }, this), !this.state.isLoggedIn && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center bg-info my-4\",\n          children: \"Twitter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wrapper fadeInDown\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"formContent\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"email\",\n                class: \"fadeIn second\",\n                name: \"email\",\n                placeholder: \"email\",\n                value: this.state.loginEmail,\n                onChange: this.handleLoginEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"username\",\n                id: \"username\",\n                class: \"fadeIn third\",\n                name: \"username\",\n                placeholder: \"username\",\n                value: this.state.loginUsername,\n                onChange: this.handleLoginUsername\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password\",\n                class: \"fadeIn fourth\",\n                name: \"password\",\n                placeholder: \"password\",\n                value: this.state.loginPassword,\n                onChange: this.handleLoginPassword\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"submit\",\n                class: \"fadeIn fifth\",\n                value: \"Log in\",\n                onClick: this.login\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"formFooter\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                class: \"underlineHover\",\n                href: \"#\",\n                children: \"Forgot Password?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                class: \"underlineHover\",\n                href: \"#\",\n                children: \"Register?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/andrew/twitter/frontend/src/App.js"],"names":["React","Component","axios","App","constructor","props","refreshList","get","then","res","setState","tweets","data","catch","err","console","log","renderTweets","tweetList","state","map","item","user","post_text","id","newText","isLoggedIn","registerEmail","registerPassword1","registerPassword2","registerUsername","loginEmail","loginPassword","loginUsername","handleTextChange","bind","handleSubmit","handleRegEmail","handleRegPassword1","handleRegPassword2","handleRegUsername","register","handleLoginEmail","handleLoginPassword","handleLoginUsername","login","componentDidMount","event","target","value","currentDate","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","image","pub_date","post","preventDefault","email","username","password1","password2","fetch","method","headers","body","JSON","stringify","json","key","localStorage","clear","setItem","password","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\";\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tweets: [],\n      newText: '',\n      isLoggedIn: false,\n      registerEmail: '',\n      registerPassword1: '',\n      registerPassword2: '',\n      registerUsername: '',\n      loginEmail: '',\n      loginPassword: '',\n      loginUsername: '',\n    };\n\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleRegEmail = this.handleRegEmail.bind(this);\n    this.handleRegPassword1=this.handleRegPassword1.bind(this);\n    this.handleRegPassword2 = this.handleRegPassword2.bind(this);\n    this.handleRegUsername=this.handleRegUsername.bind(this);\n    this.register = this.register.bind(this);\n    this.handleLoginEmail = this.handleLoginEmail.bind(this);\n    this.handleLoginPassword = this.handleLoginPassword.bind(this);\n    this.handleLoginUsername=this.handleLoginUsername.bind(this);\n    this.login = this.login.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  refreshList = () => {\n    axios\n      .get(\"/api/tweets/\")\n      .then((res) => this.setState({tweets : res.data}))\n      .catch((err) => console.log(err))\n  }\n\n  handleTextChange(event) {\n    this.setState({newText : event.target.value})\n  }\n\n  handleSubmit(event) {\n    var currentDate = new Date();\n    var date = currentDate.getFullYear()+ '-' + (currentDate.getMonth()+1)+ '-' + currentDate.getDate()+'T' + currentDate.getHours()+\":\"+currentDate.getMinutes()+\":00Z\"\n    const item = {\n      post_text: this.state.newText,\n      image: null,\n      pub_date: date,\n    }\n\n    axios\n      .post(\"/api/tweets/\", item)\n      .then((res) => this.refreshList());\n  }\n\n  handleRegEmail(event) {\n    this.setState({registerEmail : event.target.value})\n  }\n\n  handleRegPassword1(event) {\n    this.setState({registerPassword1: event.target.value})\n  }\n\n  handleRegPassword2(event) {\n    this.setState({registerPassword2: event.target.value})\n  }\n\n  handleRegUsername(event) {\n    this.setState({registerUsername: event.target.value})\n  }\n\n  register(event) {\n    event.preventDefault();\n\n    const user = {\n      email: this.state.registerEmail,\n      username: this.state.registerUsername,\n      password1: this.state.registerPassword1,\n      password2: this.state.registerPassword2,\n    };\n\n    fetch ('http://127.0.0.1:8000/api/v1/users/auth/register', {\n      method : 'POST',\n      headers : {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem('token', data.key)\n          this.setState({isLoggedIn : true});\n        } else {\n          this.setState({registerEmail: ''});\n          this.setState({registerPassword1: ''});\n          this.setState({registerPassword2: ''});\n          this.setState({registerUsername: ''});\n          localStorage.clear();\n        }\n        });\n  };\n\n  handleLoginEmail(event) {\n    this.setState({loginEmail : event.target.value})\n  }\n  \n  handleLoginPassword(event) {\n    this.setState({loginPassword: event.target.value})\n  }\n\n  handleLoginUsername(event) {\n    this.setState({loginUsername: event.target.value})\n  }\n\n  login(event) {\n    event.preventDefault();\n\n    const user = {\n      email: this.state.loginEmail,\n      username: this.state.loginUsername,\n      password: this.state.loginPassword,\n    };\n\n    fetch ('http://127.0.0.1:8000/api/v1/users/auth/login', {\n      method : 'POST',\n      headers : {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem('token', data.key)\n          console.log(data.key)\n          this.setState({isLoggedIn : true});\n        } else {\n          this.setState({loginEmail: ''});\n          this.setState({loginPassword: ''});\n          this.setState({loginUsername: ''});\n          localStorage.clear();\n        }\n        });\n  };\n\n  renderTweets = () => {\n    const tweetList = this.state.tweets;\n\n    return tweetList.map((item) => (\n      <li key = {item.id}\n      className = \"list-group-item d-flex justify-content-between align-items-center\">\n        <span>\n          {item.user} : {item.post_text}\n        </span>\n      </li>\n    ));\n  };\n\n\n  render() {\n    return (\n      <div>\n      { this.state.isLoggedIn && \n      <main className>\n        <h1 className=\"text-black text-center bg-info my-4\">Twitter</h1>\n        <div class = \"input-group mb-3 col-md-6 col-sm-10 mx-auto\">\n          <input type=\"text\" class = \"form-control form-control-lg flex-nowrap mx-auto\" placeholder = \"enter tweet here\" value = {this.state.newText} onChange = {this.handleTextChange}/>\n          <div class = \"input-group-append\">\n            <button class=\"btn btn-outline-secondary\" type=\"button\" id=\"button-addon2\" onClick={this.handleSubmit}>Tweet!</button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-6 col-sm-10 mx-auto p-0\">\n                {this.renderTweets()}\n          </div>\n        </div>\n      </main>\n      }\n      { !this.state.isLoggedIn && \n      <main className>\n        <h1 className=\"text-black text-center bg-info my-4\">Twitter</h1>\n        <div class=\"wrapper fadeInDown\">\n          <div id = \"formContent\">\n            <form>\n              <input type = \"text\" id = \"email\" class = \"fadeIn second\" name = \"email\" placeholder = \"email\" value = {this.state.loginEmail} onChange = {this.handleLoginEmail}/>\n              <input type = \"username\" id = \"username\" class = \"fadeIn third\" name = \"username\" placeholder = \"username\" value = {this.state.loginUsername} onChange = {this.handleLoginUsername}/>\n              <input type = \"password\" id = \"password\" class = \"fadeIn fourth\" name = \"password\" placeholder = \"password\" value = {this.state.loginPassword} onChange = {this.handleLoginPassword}/>\n              <input type = \"submit\" class = \"fadeIn fifth\" value = \"Log in\" onClick={this.login}/>\n            </form>\n            <div id=\"formFooter\">\n              <a class = \"underlineHover\" href = \"#\">Forgot Password?</a>\n              <a class = \"underlineHover\" href = \"#\">Register?</a>\n            </div>\n          </div>\n        </div>\n      </main>\n      \n      \n      }\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}