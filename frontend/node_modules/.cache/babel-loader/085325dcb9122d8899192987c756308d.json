{"ast":null,"code":"var _jsxFileName = \"/Users/andrew/twitter/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refreshList = () => {\n      axios.get(\"/api/tweets/\").then(res => this.setState({\n        tweets: res.data\n      })).catch(err => console.log(err));\n      axios.get(\"/api/users/\").then(res => this.setState({\n        users: res.data\n      })).catch(err => console.log(err));\n\n      for (let i = 0; i < Object.keys(this.state.users).length; i++) {\n        if (this.state.users[i].username == this.state.currentUsername) {\n          this.setState({\n            currentUser: this.state.users[i].id\n          });\n        }\n\n        ;\n      }\n    };\n\n    this.renderTweets = () => {\n      const tweetList = this.state.tweets;\n      return tweetList.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [this.state.users[item.user - 1].username, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 11\n          }, this), item.post_text, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 11\n          }, this), item.likes.includes(this.state.currentUser) && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-primary\",\n              children: [item.likes.length, \" Likes \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-primary\",\n              children: \"Unlike\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), !item.likes.includes(this.state.currentUser) && /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn btn-primary\",\n            onClick: () => this.handleLike(item),\n            children: [item.likes.length, \" Likes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 9\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 7\n      }, this));\n    };\n\n    this.state = {\n      tweets: [],\n      users: [],\n      newText: '',\n      isLoggedIn: false,\n      registerEmail: '',\n      registerPassword1: '',\n      registerPassword2: '',\n      registerUsername: '',\n      loginEmail: '',\n      loginPassword: '',\n      loginUsername: '',\n      currentUsername: '',\n      currentUser: null,\n      registerUser: false\n    };\n    this.refreshList();\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleRegEmail = this.handleRegEmail.bind(this);\n    this.handleRegPassword1 = this.handleRegPassword1.bind(this);\n    this.handleRegPassword2 = this.handleRegPassword2.bind(this);\n    this.handleRegUsername = this.handleRegUsername.bind(this);\n    this.register = this.register.bind(this);\n    this.handleLoginEmail = this.handleLoginEmail.bind(this);\n    this.handleLoginPassword = this.handleLoginPassword.bind(this);\n    this.handleLoginUsername = this.handleLoginUsername.bind(this);\n    this.login = this.login.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLike = this.handleLike.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  handleTextChange(event) {\n    this.setState({\n      newText: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    var currentDate = new Date();\n    var date = currentDate.getFullYear() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getDate() + 'T' + currentDate.getHours() + \":\" + currentDate.getMinutes() + \":00Z\";\n    const item = {\n      user: this.state.currentUser,\n      post_text: this.state.newText,\n      likes: [],\n      image: null,\n      pub_date: date\n    };\n    console.log(item);\n    axios.post(\"/api/tweets/\", item).then(res => this.refreshList());\n  }\n\n  handleLike(item) {\n    var tempLikes = item.likes.slice();\n    const id = item.id;\n    tempLikes.push(this.state.currentUser);\n    const newTweet = {\n      id: item.id,\n      user: item.user,\n      post_text: item.post_text,\n      likes: tempLikes,\n      image: item.image,\n      pub_date: item.pub_date.substring(6, 10) + '-' + item.pub_date.substring(0, 2) + '-' + item.pub_date.substring(3, 5) + 'T' + item.pub_date.substring(11, 16) + \":00Z\"\n    };\n    console.log(newTweet);\n    axios.put(\"/api/tweets/\" + id + \"/\", newTweet).then(res => this.refreshList()).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  handleRegEmail(event) {\n    this.setState({\n      registerEmail: event.target.value\n    });\n  }\n\n  handleRegPassword1(event) {\n    this.setState({\n      registerPassword1: event.target.value\n    });\n  }\n\n  handleRegPassword2(event) {\n    this.setState({\n      registerPassword2: event.target.value\n    });\n  }\n\n  handleRegUsername(event) {\n    this.setState({\n      registerUsername: event.target.value\n    });\n  }\n\n  handleChange(event) {\n    this.setState(prevstate => ({\n      registerUser: !prevstate.registerUser\n    }));\n  }\n\n  register(event) {\n    event.preventDefault();\n    const user = {\n      email: this.state.registerEmail,\n      username: this.state.registerUsername,\n      password1: this.state.registerPassword1,\n      password2: this.state.registerPassword2\n    };\n    fetch('http://127.0.0.1:8000/api/v1/users/auth/register/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      if (data.key) {\n        localStorage.clear();\n        localStorage.setItem('token', data.key);\n        this.setState({\n          currentUsername: user.username\n        });\n        this.setState({\n          isLoggedIn: true\n        });\n        this.refreshList();\n      } else {\n        this.setState({\n          registerEmail: ''\n        });\n        this.setState({\n          registerPassword1: ''\n        });\n        this.setState({\n          registerPassword2: ''\n        });\n        this.setState({\n          registerUsername: ''\n        });\n        localStorage.clear();\n      }\n    });\n  }\n\n  handleLoginEmail(event) {\n    this.setState({\n      loginEmail: event.target.value\n    });\n  }\n\n  handleLoginPassword(event) {\n    this.setState({\n      loginPassword: event.target.value\n    });\n  }\n\n  handleLoginUsername(event) {\n    this.setState({\n      loginUsername: event.target.value\n    });\n  }\n\n  login(event) {\n    event.preventDefault();\n    const user = {\n      email: this.state.loginEmail,\n      username: this.state.loginUsername,\n      password: this.state.loginPassword\n    };\n    fetch('http://127.0.0.1:8000/api/v1/users/auth/login/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(data => {\n      if (data.key) {\n        localStorage.clear();\n        localStorage.setItem('token', data.key);\n        this.setState({\n          currentUsername: user.username\n        });\n        this.setState({\n          isLoggedIn: true\n        });\n        this.refreshList();\n      } else {\n        this.setState({\n          loginEmail: ''\n        });\n        this.setState({\n          loginPassword: ''\n        });\n        this.setState({\n          loginUsername: ''\n        });\n        localStorage.clear();\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.isLoggedIn && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center bg-info my-4\",\n          children: \"Twitter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"input-group mb-3 col-md-6 col-sm-10 mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            class: \"form-control form-control-lg flex-nowrap mx-auto\",\n            placeholder: \"enter tweet here\",\n            value: this.state.newText,\n            onChange: this.handleTextChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"input-group-append\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-outline-secondary\",\n              type: \"button\",\n              id: \"button-addon2\",\n              onClick: this.handleSubmit,\n              children: \"Tweet!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-sm-10 mx-auto p-0 text-wrap\",\n            children: this.renderTweets()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }, this), !this.state.isLoggedIn && !this.state.registerUser && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center bg-info my-4\",\n          children: \"Twitter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wrapper fadeInDown\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"formContent\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Sign in! \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"email\",\n                class: \"fadeIn second\",\n                name: \"email\",\n                placeholder: \"email\",\n                value: this.state.loginEmail,\n                onChange: this.handleLoginEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"username\",\n                id: \"username\",\n                class: \"fadeIn third\",\n                name: \"username\",\n                placeholder: \"username\",\n                value: this.state.loginUsername,\n                onChange: this.handleLoginUsername\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password\",\n                class: \"fadeIn fourth\",\n                name: \"password\",\n                placeholder: \"password\",\n                value: this.state.loginPassword,\n                onChange: this.handleLoginPassword\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"submit\",\n                class: \"fadeIn fifth\",\n                value: \"Log in\",\n                onClick: this.login\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"formFooter\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                class: \"underlineHover\",\n                href: \"#\",\n                children: \"Forgot Password?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                class: \"underlineHover\",\n                onClick: this.handleChange,\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 7\n      }, this), !this.state.isLoggedIn && this.state.registerUser && /*#__PURE__*/_jsxDEV(\"main\", {\n        className: true,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-black text-center my-4\",\n          children: \"Twitter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"wrapper fadeInDown\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"formContent\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Register \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"regemail\",\n                class: \"fadeIn second\",\n                name: \"email\",\n                placeholder: \"email\",\n                value: this.state.registerEmail,\n                onChange: this.handleRegEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"username\",\n                id: \"regusername\",\n                class: \"fadeIn third\",\n                name: \"username\",\n                placeholder: \"username\",\n                value: this.state.registerUsername,\n                onChange: this.handleRegUsername\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password1\",\n                class: \"fadeIn fourth\",\n                name: \"password1\",\n                placeholder: \"password\",\n                value: this.state.registerPassword1,\n                onChange: this.handleRegPassword1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password2\",\n                class: \"fadeIn fourth\",\n                name: \"password2\",\n                placeholder: \"enter password again!\",\n                value: this.state.registerPassword2,\n                onChange: this.handleRegPassword2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"submit\",\n                class: \"fadeIn fifth\",\n                value: \"Register!\",\n                onClick: this.register\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"formFooter\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                class: \"underlineHover\",\n                onClick: this.handleChange,\n                children: \"Forgot Password?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                class: \"underlineHover\",\n                onClick: this.handleChange,\n                children: \"Already Have An Account?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/andrew/twitter/frontend/src/App.js"],"names":["React","Component","axios","App","constructor","props","refreshList","get","then","res","setState","tweets","data","catch","err","console","log","users","i","Object","keys","state","length","username","currentUsername","currentUser","id","renderTweets","tweetList","map","item","user","post_text","likes","includes","handleLike","newText","isLoggedIn","registerEmail","registerPassword1","registerPassword2","registerUsername","loginEmail","loginPassword","loginUsername","registerUser","handleTextChange","bind","handleSubmit","handleRegEmail","handleRegPassword1","handleRegPassword2","handleRegUsername","register","handleLoginEmail","handleLoginPassword","handleLoginUsername","login","handleChange","componentDidMount","event","target","value","currentDate","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","image","pub_date","post","tempLikes","slice","push","newTweet","substring","put","error","response","prevstate","preventDefault","email","password1","password2","fetch","method","headers","body","JSON","stringify","json","key","localStorage","clear","setItem","password","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from \"axios\";\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tweets: [],\n      users: [],\n      newText: '',\n      isLoggedIn: false,\n      registerEmail: '',\n      registerPassword1: '',\n      registerPassword2: '',\n      registerUsername: '',\n      loginEmail: '',\n      loginPassword: '',\n      loginUsername: '',\n      currentUsername: '',\n      currentUser:null,\n      registerUser: false,\n    };\n    this.refreshList();\n\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleRegEmail = this.handleRegEmail.bind(this);\n    this.handleRegPassword1=this.handleRegPassword1.bind(this);\n    this.handleRegPassword2 = this.handleRegPassword2.bind(this);\n    this.handleRegUsername=this.handleRegUsername.bind(this);\n    this.register = this.register.bind(this);\n    this.handleLoginEmail = this.handleLoginEmail.bind(this);\n    this.handleLoginPassword = this.handleLoginPassword.bind(this);\n    this.handleLoginUsername=this.handleLoginUsername.bind(this);\n    this.login = this.login.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLike = this.handleLike.bind(this);\n  }\n\n  componentDidMount() {\n    this.refreshList();\n  }\n\n  refreshList = () => {\n    axios\n      .get(\"/api/tweets/\")\n      .then((res) => this.setState({tweets : res.data}))\n      .catch((err) => console.log(err))\n    \n    axios\n      .get(\"/api/users/\")\n      .then((res) => this.setState({users : res.data}))\n      .catch((err) => console.log(err))\n    \n      for (let i = 0; i < Object.keys(this.state.users).length; i++) {\n        if (this.state.users[i].username == this.state.currentUsername) {\n          this.setState({currentUser: this.state.users[i].id});\n        };\n      }\n  }\n\n  handleTextChange(event) {\n    this.setState({newText : event.target.value})\n  }\n\n  handleSubmit(event) {\n    var currentDate = new Date();\n    var date = currentDate.getFullYear()+ '-' + (currentDate.getMonth()+1)+ '-' + currentDate.getDate()+'T' + currentDate.getHours()+\":\"+currentDate.getMinutes()+\":00Z\"\n    \n    \n    const item = {\n      user: this.state.currentUser,\n      post_text: this.state.newText,\n      likes: [],\n      image: null,\n      pub_date: date,\n    }\n    console.log(item)\n    axios\n      .post(\"/api/tweets/\", item)\n      .then((res) => this.refreshList());\n  }\n\n  handleLike(item) {\n    var tempLikes = item.likes.slice();\n    const id = item.id;\n    tempLikes.push(this.state.currentUser);\n    const newTweet = {\n      id: item.id,\n      user: item.user,\n      post_text: item.post_text,\n      likes: tempLikes,\n      image: item.image,\n      pub_date: item.pub_date.substring(6, 10)+'-'+item.pub_date.substring(0, 2)+'-'+item.pub_date.substring(3, 5)+'T'+item.pub_date.substring(11, 16)+\":00Z\",\n    };\n    console.log(newTweet);\n    axios\n      .put(\"/api/tweets/\"+ id +\"/\", newTweet)\n      .then((res) => this.refreshList())\n      .catch((error) => {\n        console.log(error.response)\n      });\n  }\n\n  handleRegEmail(event) {\n    this.setState({registerEmail : event.target.value})\n  }\n\n  handleRegPassword1(event) {\n    this.setState({registerPassword1: event.target.value})\n  }\n\n  handleRegPassword2(event) {\n    this.setState({registerPassword2: event.target.value})\n  }\n\n  handleRegUsername(event) {\n    this.setState({registerUsername: event.target.value})\n  }\n\n  handleChange(event) {\n    this.setState(prevstate =>\n      ({registerUser : !prevstate.registerUser})\n    )\n  }\n\n  register(event) {\n    event.preventDefault();\n\n    const user = {\n      email: this.state.registerEmail,\n      username: this.state.registerUsername,\n      password1: this.state.registerPassword1,\n      password2: this.state.registerPassword2,\n    };\n\n    fetch ('http://127.0.0.1:8000/api/v1/users/auth/register/', {\n      method : 'POST',\n      headers : {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem('token', data.key)\n          this.setState({currentUsername: user.username})\n          this.setState({isLoggedIn : true});\n          this.refreshList();\n        } else {\n          this.setState({registerEmail: ''});\n          this.setState({registerPassword1: ''});\n          this.setState({registerPassword2: ''});\n          this.setState({registerUsername: ''});\n          localStorage.clear();\n        }\n        });\n  };\n\n  handleLoginEmail(event) {\n    this.setState({loginEmail : event.target.value})\n  }\n  \n  handleLoginPassword(event) {\n    this.setState({loginPassword: event.target.value})\n  }\n\n  handleLoginUsername(event) {\n    this.setState({loginUsername: event.target.value})\n  }\n\n  login(event) {\n    event.preventDefault();\n\n    const user = {\n      email: this.state.loginEmail,\n      username: this.state.loginUsername,\n      password: this.state.loginPassword,\n    };\n\n    \n    fetch ('http://127.0.0.1:8000/api/v1/users/auth/login/', {\n      method : 'POST',\n      headers : {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.key) {\n          localStorage.clear();\n          localStorage.setItem('token', data.key);\n          this.setState({currentUsername : user.username})\n          this.setState({isLoggedIn : true});\n          this.refreshList();\n        } else {\n          this.setState({loginEmail: ''});\n          this.setState({loginPassword: ''});\n          this.setState({loginUsername: ''});\n          localStorage.clear();\n        }\n        });\n  };\n\n  renderTweets = () => {\n    const tweetList = this.state.tweets;\n    \n    return tweetList.map((item) => (\n      <li key = {item.id}\n      className = \"list-group-item d-flex justify-content-between align-items-center\">\n        <span>\n          <h2>{this.state.users[item.user - 1].username} </h2>\n          <br/>\n                  {item.post_text}\n          <br/>\n          {item.likes.includes(this.state.currentUser) && \n            <div>\n              <button class = \"btn btn-primary\">{item.likes.length} Likes </button>\n              <button class = \"btn btn-primary\">Unlike</button>\n            </div>\n          }\n          {!item.likes.includes(this.state.currentUser) &&\n            <button class = \"btn btn-primary\" onClick={()=>this.handleLike(item)}>{item.likes.length} Likes</button>\n          }\n        </span>\n      </li>\n    ));\n  };\n\n\n  render() {\n    return (\n      <div>\n      { this.state.isLoggedIn && \n      <main className>\n        <h1 className=\"text-black text-center bg-info my-4\">Twitter</h1>\n        <div class = \"input-group mb-3 col-md-6 col-sm-10 mx-auto\">\n          <input type=\"text\" class = \"form-control form-control-lg flex-nowrap mx-auto\" placeholder = \"enter tweet here\" value = {this.state.newText} onChange = {this.handleTextChange}/>\n          <div class = \"input-group-append\">\n            <button class=\"btn btn-outline-secondary\" type=\"button\" id=\"button-addon2\" onClick={this.handleSubmit}>Tweet!</button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-6 col-sm-10 mx-auto p-0 text-wrap\">\n                {this.renderTweets()}\n          </div>\n        </div>\n      </main>\n      }\n      { !this.state.isLoggedIn && !this.state.registerUser &&\n      <main className>\n        <h1 className=\"text-black text-center bg-info my-4\">Twitter</h1>\n        <div class=\"wrapper fadeInDown\">\n          <div id = \"formContent\">\n            <form>\n              <h2>Sign in! </h2>\n              <br/>\n              <input type = \"text\" id = \"email\" class = \"fadeIn second\" name = \"email\" placeholder = \"email\" value = {this.state.loginEmail} onChange = {this.handleLoginEmail}/>\n              <br/>\n              <input type = \"username\" id = \"username\" class = \"fadeIn third\" name = \"username\" placeholder = \"username\" value = {this.state.loginUsername} onChange = {this.handleLoginUsername}/>\n              <br/>\n              <input type = \"password\" id = \"password\" class = \"fadeIn fourth\" name = \"password\" placeholder = \"password\" value = {this.state.loginPassword} onChange = {this.handleLoginPassword}/>\n              <br/>\n              <input type = \"submit\" class = \"fadeIn fifth\" value = \"Log in\" onClick={this.login}/>\n            </form>\n            <div id=\"formFooter\">\n              <button class = \"underlineHover\" href = \"#\">Forgot Password?</button>\n              <br/>\n              <button class = \"underlineHover\" onClick={this.handleChange}>Register</button>\n            </div>\n          </div>\n        </div>\n      </main>\n      }\n      { !this.state.isLoggedIn && this.state.registerUser &&\n      <main className>\n      <h1 className=\"text-black text-center my-4\">Twitter</h1>\n      <div class=\"wrapper fadeInDown\">\n        <div id = \"formContent\">\n          <form>\n            <h2>Register </h2>\n            <br/>\n            <input type = \"text\" id = \"regemail\" class = \"fadeIn second\" name = \"email\" placeholder = \"email\" value = {this.state.registerEmail} onChange = {this.handleRegEmail}/>\n            <br/>\n            <input type = \"username\" id = \"regusername\" class = \"fadeIn third\" name = \"username\" placeholder = \"username\" value = {this.state.registerUsername} onChange = {this.handleRegUsername}/>\n            <br/>\n            <input type = \"password\" id = \"password1\" class = \"fadeIn fourth\" name = \"password1\" placeholder = \"password\" value = {this.state.registerPassword1} onChange = {this.handleRegPassword1}/>\n            <br/>\n            <input type = \"password\" id = \"password2\" class = \"fadeIn fourth\" name = \"password2\" placeholder = \"enter password again!\" value = {this.state.registerPassword2} onChange = {this.handleRegPassword2}/>\n            <br/>\n            <input type = \"submit\" class = \"fadeIn fifth\" value = \"Register!\" onClick={this.register}/>\n          </form>\n          <div id=\"formFooter\">\n            <button class = \"underlineHover\" onClick={this.handleChange}>Forgot Password?</button>\n            <br/>\n            <button type=\"submit\" class = \"underlineHover\" onClick={this.handleChange}>Already Have An Account?</button>\n          </div>\n        </div>\n      </div>\n    </main>\n      }\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}